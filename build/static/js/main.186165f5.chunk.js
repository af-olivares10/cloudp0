(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){},145:function(e,t,a){e.exports=a(285)},150:function(e,t,a){},285:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(9),s=a.n(r),i=(a(150),a(28)),o=a(29),c=a(31),u=a(30),d=a(32),m=(a(65),a(115),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).login=function(e){a.setState({loading:!0,loginError:""}),e.preventDefault();var t={mail:a.refs.username.value,password:a.refs.password.value},n=a.state.signUp?"user":"authenticate";fetch("/users/".concat(n),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){a.setState({loading:!1}),e.success?a.state.signUp?fetch("/users/authenticate",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){a.setState({loading:!1}),e.success?(localStorage.setItem("CloudToken",e.token),localStorage.setItem("mail",a.refs.username.value),a.props.setLogged(!0),window.alert("User registered succesfully!")):a.setState({loginError:e.message})}).catch(function(e){console.error(e)}):(localStorage.setItem("CloudToken",e.token),localStorage.setItem("mail",a.refs.username.value),a.props.setLogged(!0)):a.setState({loginError:e.message})}).catch(function(e){console.error(e)})},a.switch=function(){a.setState(function(e){return{signUp:!e.signUp}})},a.state={loginError:"",loading:!1,signUp:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"login"},l.a.createElement("div",{className:"container "},l.a.createElement("div",{className:"profile profile--open"},l.a.createElement("div",{className:"profile__avatar",id:"toggleProfile"},l.a.createElement("img",{src:"cloud.png",alt:"Cloud",style:{width:"100px",left:"50%",transform:"translateX(-50%)",position:"absolute"}})),l.a.createElement("form",{className:"profile__form",onSubmit:this.login},l.a.createElement("div",{className:"profile__fields"},l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Email"),l.a.createElement("input",{type:"email",id:"fieldUser",className:"input",ref:"username",required:!0,pattern:".*\\S.*"})),l.a.createElement("div",{className:"field"},l.a.createElement("label",null,"Password"),l.a.createElement("input",{type:"password",id:"fieldPassword",className:"input",ref:"password",required:!0,pattern:".*\\S.*"})),this.state.loading?l.a.createElement("div",{className:"spinner"},l.a.createElement("div",{className:"double-bounce1"}),l.a.createElement("div",{className:"double-bounce2"})):l.a.createElement("div",null,this.state.signUp?l.a.createElement("div",{className:"profile__footer"},l.a.createElement("div",{className:"profile__footer"},l.a.createElement("button",{className:"btn",type:"submit"},"Sign up")),l.a.createElement("label",{className:"switch-letter",onClick:this.switch},"Registered? Sign in!")):l.a.createElement("div",null,l.a.createElement("div",{className:"profile__footer"},l.a.createElement("button",{className:"btn",type:"submit"},"Login")),l.a.createElement("label",{className:"switch-letter",onClick:this.switch},"Not registered? Sign up!"))),l.a.createElement("label",{className:"login-error"},this.state.loginError))))))}}]),t}(n.Component)),g=a(288),p=a(109),h=a(289),E=a(290),v=a(286),f=a(291),b=a(287),C=a(292),S=h.a.Option,y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n={name:t.name,category:a.state.category,place:t.place,address:t.address,start_date:a.state.startDate,end_date:a.state.endDate,virt:a.state.virtual?1:0,USER_ID:localStorage.getItem("mail")};fetch("/events/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){a.setState({loading:!1}),window.alert(e.message),e.success&&(a.props.closeNewEventModal(),window.location.reload())})}})},a.handleCategoryChange=function(e){a.setState({category:e})},a.startDateChange=function(e,t){a.setState({startDate:t})},a.endDateChange=function(e,t){a.setState({endDate:t})},a.virutalChange=function(e){a.setState({virtual:e.target.checked})},a.state={events:[],newEventModalVisible:!1,category:"Conference",startDate:"",endDate:"",virutal:!1,loading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return l.a.createElement(E.a,{title:"New Event",visible:this.props.visible,footer:[]},this.state.loading?l.a.createElement("div",{className:"spinner"},l.a.createElement("div",{className:"double-bounce1"}),l.a.createElement("div",{className:"double-bounce2"})):l.a.createElement(v.a,{onSubmit:this.handleSubmit},l.a.createElement(v.a.Item,{label:"Name"},e("name",{rules:[{},{required:!0,message:"Please input a name!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Category"},l.a.createElement(h.a,{defaultValue:"Conference",style:{width:120},onChange:this.handleCategoryChange},l.a.createElement(S,{value:"Conference"},"Conference"),l.a.createElement(S,{value:"Seminar"},"Seminar"),l.a.createElement(S,{value:"Congress"},"Congress"),l.a.createElement(S,{value:"Course"},"Course"))),l.a.createElement(v.a.Item,{label:"Place"},e("place",{rules:[{required:!0,message:"Please input a place!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Address"},e("address",{rules:[{required:!0,message:"Please input an address!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Start date"},e("startDate",{rules:[{required:!0,message:"Please input a start date!"}]})(l.a.createElement(b.a,{onChange:this.startDateChange}))),l.a.createElement(v.a.Item,{label:"End date"},e("endDate",{rules:[{required:!0,message:"Please input an end date!"}]})(l.a.createElement(b.a,{onChange:this.endDateChange}))),l.a.createElement(v.a.Item,{label:"Is it virtual?"},e("email",{})(l.a.createElement(C.a,{onChange:this.virutalChange}))),l.a.createElement(v.a.Item,null,l.a.createElement(p.a,{type:"primary",htmlType:"submit"},"Register"))))}}]),t}(n.Component),w=v.a.create({name:"horizontal_login"})(y),j=h.a.Option,N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){a.setState({loading:!0}),e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){if(!e){var n={name:t.name,category:a.state.category,place:t.place,address:t.address,start_date:a.state.startDate,end_date:a.state.endDate,virt:a.state.virtual?1:0,USER_ID:localStorage.getItem("mail")};fetch("/events/?id=".concat(a.props.currentEvent),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){a.setState({loading:!1}),window.alert(e.message),e.success&&(a.props.closeEditEventModal(),window.location.reload())})}})},a.handleCategoryChange=function(e){a.setState({category:e})},a.startDateChange=function(e,t){a.setState({startDate:t})},a.endDateChange=function(e,t){a.setState({endDate:t})},a.virutalChange=function(e){a.setState({virtual:e.target.checked})},a.state={events:[],category:"Conference",startDate:"",endDate:"",virutal:!1,loading:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return l.a.createElement(E.a,{title:"Edit Event",visible:this.props.visible,footer:[]},this.state.loading?l.a.createElement("div",{className:"spinner"},l.a.createElement("div",{className:"double-bounce1"}),l.a.createElement("div",{className:"double-bounce2"})):l.a.createElement(v.a,{onSubmit:this.handleSubmit},l.a.createElement(v.a.Item,{label:"Name"},e("name",{rules:[{},{required:!0,message:"Please input a name!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Category"},l.a.createElement(h.a,{defaultValue:"Conference",style:{width:120},onChange:this.handleCategoryChange},l.a.createElement(j,{value:"Conference"},"Conference"),l.a.createElement(j,{value:"Seminar"},"Seminar"),l.a.createElement(j,{value:"Congress"},"Congress"),l.a.createElement(j,{value:"Course"},"Course"))),l.a.createElement(v.a.Item,{label:"Place"},e("place",{rules:[{required:!0,message:"Please input a place!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Address"},e("address",{rules:[{required:!0,message:"Please input an address!"}]})(l.a.createElement(f.a,null))),l.a.createElement(v.a.Item,{label:"Start date"},e("startDate",{rules:[{required:!0,message:"Please input a start date!"}]})(l.a.createElement(b.a,{onChange:this.startDateChange}))),l.a.createElement(v.a.Item,{label:"End date"},e("endDate",{rules:[{required:!0,message:"Please input an end date!"}]})(l.a.createElement(b.a,{onChange:this.endDateChange}))),l.a.createElement(v.a.Item,{label:"Is it virtual?"},e("email",{})(l.a.createElement(C.a,{onChange:this.virutalChange}))),l.a.createElement(v.a.Item,null,l.a.createElement(p.a,{type:"primary",htmlType:"submit"},"Edit"))))}}]),t}(n.Component),O=v.a.create({name:"horizontal_login"})(N),D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).edit=function(e){a.setState({editEventModalVisible:!0,currentEvent:e.id})},a.remove=function(e){fetch("/events/?id=".concat(e.id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){window.alert(e.message),e.success&&window.location.reload()})},a.renderEvents=function(){return a.state.events.length?a.state.events.map(function(e,t){return l.a.createElement(g.a,{title:e.name,bordered:!1,key:t,style:{margin:"20px auto",width:"30%"}},l.a.createElement("div",null,"Category: ",e.category),l.a.createElement("div",null,"Place: ",e.place),l.a.createElement("div",null,"Address: ",e.address),l.a.createElement("div",null,"Start date: ",e.start_date),l.a.createElement("div",null,"End date: ",e.end_date),l.a.createElement("div",null,"Is it virtual?: ",e.virt.data[0]?"Yes":"No"),l.a.createElement("div",null,l.a.createElement(p.a,{type:"primary",className:"new-event-button",onClick:function(){return a.edit(e)}},"Edit")),l.a.createElement("div",null,l.a.createElement(p.a,{type:"primary",className:"new-event-button",onClick:function(){return a.remove(e)}},"Delete")))}):l.a.createElement("div",{style:{color:"white",textAlign:"center"}},"You have no events yet.")},a.signOut=function(){localStorage.removeItem("CloudToken"),window.location.reload()},a.state={events:[],newEventModalVisible:!1,editEventModalVisible:!1,currentEvent:0},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/events/?USER_ID=".concat(localStorage.getItem("mail")),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){e.setState({events:t.result})})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"sign-out",onClick:this.signOut},"Sign Out"),l.a.createElement("div",{className:"main-title"},"My events"),l.a.createElement(p.a,{type:"primary",className:"new-event-button",onClick:function(){return e.setState({newEventModalVisible:!0})}},"New event"),this.renderEvents(),l.a.createElement(w,{visible:this.state.newEventModalVisible,closeNewEventModal:function(){e.setState({newEventModalVisible:!1})}}),l.a.createElement(O,{currentEvent:this.state.currentEvent,visible:this.state.editEventModalVisible,closeEditEventModal:function(){e.setState({editEventModalVisible:!1})}}))}}]),t}(n.Component),I=(a(283),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).setLogged=function(e){a.setState({logged:e})},a.state={logged:!1},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/users/checkToken",{method:"GET",headers:{"x-access-token":localStorage.getItem("CloudToken"),Accept:"application/json","Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){t.success?e.setState({logged:!0}):e.setState({logged:!1})}).catch(function(e){return console.error(e)})}},{key:"render",value:function(){return this.state.logged?l.a.createElement(D,{setLogged:this.setLogged}):l.a.createElement(m,{setLogged:this.setLogged})}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,a){}},[[145,2,1]]]);
//# sourceMappingURL=main.186165f5.chunk.js.map